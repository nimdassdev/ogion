# Configuration

Done by environment variables.

## Environemt variables

**Required**:

```bash
ZIP_ARCHIVE_PASSWORD="secret_password"
```

**Defined in other sections**:

1. In `Providers` chapter - to setup cloud provider.

    **BACKUP_PROVIDER**

    **GOOGLE_BUCKET_NAME**

    **GOOGLE_BUCKET_UPLOAD_PATH**

    **GOOGLE_SERVICE_ACCOUNT_BASE64**

2. In `Backup targets` chapter - to define what to backup.

    **POSTGRESQL_...** 
    
    **MYSQL_...**
    
    **MARIADB_...** 
    
    **SINGLEFILE_...**
    
    **DIRECTORY_...**

3. In `Notifications` chapter - to define where to send success/fail notification.
   
    **DISCORD_SUCCESS_WEBHOOK_URL**

    **DISCORD_FAIL_WEBHOOK_URL**

**Optional with sensible defaults**:

```bash
LOG_LEVEL="INFO"
SUBPROCESS_TIMEOUT_SECS=3600
SIGTERM_TIMEOUT_SECS=30
ZIP_ARCHIVE_LEVEL=3
BACKUP_MAX_NUMBER=7
```

## Reference

### ZIP_ARCHIVE_PASSWORD

`ZIP_ARCHIVE_PASSWORD` (String) is a zip archive password that **all backups generated by this backuper instance will have**. Keep it in a safe place, since when it is lost, you lose access to your backups.

### LOG_LEVEL

`LOG_LEVEL` (String) is case sensitive const log level, must be one of `INFO`, `DEBUG`, `WARNING`, `ERROR`. Defaults to `INFO`.

### SUBPROCESS_TIMEOUT_SECS

`SUBPROCESS_TIMEOUT_SECS` (Integer) indicates how long subprocesses can last. Note that all backups are run from shell in subprocesses. Defaults to 3600 seconds which should be enough for even big dbs to make backup of.

### ZIP_ARCHIVE_LEVEL

`ZIP_ARCHIVE_LEVEL` (Integer [1-9]) to set compression level of 7-zip via `-mx` option.
    ```bash
      -m{Parameters} : set compression Method
        -mx[N] : set compression level: -mx1 (fastest) ... -mx9 (ultra)
    ```
Defaults to `3` which should be sufficient and fast enough.

### BACKUP_MAX_NUMBER

`BACKUP_MAX_NUMBER` (Integer) How many backups can live at once for backup target. Defaults to `7`. Note this must makes sense with cron expression you use. For example if you want to have 7 day retention, and make backups at 5:00, BACKUP_MAX_NUMBER=7 is fine, but if you make 4 backups per day, you will need BACKUP_MAX_NUMBER=28.

<br>
<br>