version: "3.4"

services:
  postgres_14:
    restart: "unless-stopped"
    image: postgres:14
    volumes:
      - pg_dump_dev_postgresql_14:/var/lib/postgresql/data
    environment:
      - POSTGRES_PASSWORD=postgres
    ports:
      - 10014:5432
  postgres_13:
    restart: "unless-stopped"
    image: postgres:13
    volumes:
      - pg_dump_dev_postgresql_13:/var/lib/postgresql/data
    environment:
      - POSTGRES_PASSWORD=postgres
    ports:
      - 10013:5432
  postgres_12:
    restart: "unless-stopped"
    image: postgres:12
    volumes:
      - pg_dump_dev_postgresql_12:/var/lib/postgresql/data
    environment:
      - POSTGRES_PASSWORD=postgres
    ports:
      - 10012:5432
  postgres_11:
    restart: "unless-stopped"
    image: postgres:11
    volumes:
      - pg_dump_dev_postgresql_11:/var/lib/postgresql/data
    environment:
      - POSTGRES_PASSWORD=postgres
    ports:
      - 10011:5432
  postgres_10:
    restart: "unless-stopped"
    image: postgres:10
    volumes:
      - pg_dump_dev_postgresql_10:/var/lib/postgresql/data
    environment:
      - POSTGRES_PASSWORD=postgres
    ports:
      - 10010:5432
  pg_dump:
    build:
      context: ./
      dockerfile: Dockerfile
    env_file:
      - .env
    volumes:
      - pg_dump_dev_data:/var/lib/pg_dump/data/
volumes:
  pg_dump_dev_postgresql_14:
  pg_dump_dev_postgresql_13:
  pg_dump_dev_postgresql_12:
  pg_dump_dev_postgresql_11:
  pg_dump_dev_postgresql_10:
  pg_dump_dev_data: